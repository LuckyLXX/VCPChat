# VCPChat Git æ ‡å‡†æ›´æ–°æµç¨‹

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†ä»ä¸Šæ¸¸ä»“åº“ï¼ˆupstreamï¼‰æ‹‰å–æœ€æ–°æ›´æ–°çš„æ ‡å‡†æ“ä½œæµç¨‹ï¼Œç”¨äºä¿æŒæœ¬åœ°ä»£ç ä¸ä¸»é¡¹ç›®åŒæ­¥ã€‚

## âš™ï¸ å‰ç½®æ¡ä»¶

1. **å·²é…ç½®ä¸Šæ¸¸ä»“åº“**ï¼šç¡®ä¿å·²ç»æ·»åŠ äº†upstreamè¿œç¨‹ä»“åº“
2. **æœ¬åœ°å·¥ä½œåŒºå¹²å‡€**ï¼šå»ºè®®åœ¨å¼€å§‹å‰æäº¤æˆ–æš‚å­˜æ‰€æœ‰æœ¬åœ°ä¿®æ”¹
3. **æƒé™ç¡®è®¤**ï¼šç¡®è®¤æœ‰è¶³å¤Ÿçš„æƒé™æ‰§è¡ŒGitæ“ä½œ

## ğŸ”„ æ ‡å‡†æ›´æ–°æµç¨‹

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒæ£€æŸ¥

```bash
# 1. æ£€æŸ¥å½“å‰GitçŠ¶æ€
git status

# 2. æŸ¥çœ‹è¿œç¨‹ä»“åº“é…ç½®
git remote -v

# 3. æŸ¥çœ‹å½“å‰åˆ†æ”¯å’Œæ‰€æœ‰åˆ†æ”¯
git branch -a

# 4. ç¡®è®¤upstreamä»“åº“å­˜åœ¨
git remote get-url upstream
```

**é¢„æœŸè¾“å‡ºï¼š**
- åº”è¯¥çœ‹åˆ° `upstream` è¿œç¨‹ä»“åº“é…ç½®
- å½“å‰åº”è¯¥åœ¨ `main` åˆ†æ”¯ä¸Š
- å·¥ä½œåŒºåº”è¯¥æ˜¯å¹²å‡€çš„çŠ¶æ€ï¼ˆæ— æœªæäº¤çš„ä¿®æ”¹ï¼‰

### ç¬¬äºŒæ­¥ï¼šæ‹‰å–ä¸Šæ¸¸æ›´æ–°

```bash
# æ‹‰å–upstreamä»“åº“çš„æœ€æ–°å†…å®¹
git fetch upstream
```

**é¢„æœŸè¾“å‡ºï¼š**
```
From https://github.com/lioensky/VCPChat
   [æ—§commit]..[æ–°commit]  main       -> upstream/main
```

### ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹æ›´æ–°å†…å®¹

```bash
# æŸ¥çœ‹upstreamç›¸å¯¹äºæœ¬åœ°çš„æ–°æäº¤
git log --oneline main..upstream/main

# æŸ¥çœ‹è¯¦ç»†çš„æ–‡ä»¶å˜æ›´ç»Ÿè®¡
git diff --stat main..upstream/main

# æŸ¥çœ‹å…·ä½“çš„æ–‡ä»¶å˜æ›´å†…å®¹ï¼ˆå¯é€‰ï¼‰
git diff --name-only main..upstream/main
```

### ç¬¬å››æ­¥ï¼šå¤„ç†æœ¬åœ°å†²çª

#### æƒ…å†µAï¼šå·¥ä½œåŒºå¹²å‡€ï¼ˆæ¨èçŠ¶æ€ï¼‰
ç›´æ¥è¿›è¡Œç¬¬äº”æ­¥åˆå¹¶æ“ä½œ

#### æƒ…å†µBï¼šæœ‰æœªæäº¤çš„æœ¬åœ°ä¿®æ”¹

**é€‰é¡¹1ï¼šæš‚å­˜ä¿®æ”¹ï¼ˆæ¨èï¼‰**
```bash
# æš‚å­˜æ‰€æœ‰ä¿®æ”¹
git stash push -m "æ›´æ–°å‰æš‚å­˜æœ¬åœ°ä¿®æ”¹"

# åˆå¹¶åæ¢å¤æš‚å­˜
git stash pop
```

**é€‰é¡¹2ï¼šæäº¤æœ¬åœ°ä¿®æ”¹**
```bash
# æäº¤æœ¬åœ°ä¿®æ”¹
git add .
git commit -m "æäº¤æœ¬åœ°ä¿®æ”¹ä»¥å¤‡åˆå¹¶upstreamæ›´æ–°"
```

**é€‰é¡¹3ï¼šæ”¾å¼ƒæœ¬åœ°ä¿®æ”¹ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰**
```bash
# æ”¾å¼ƒæ‰€æœ‰æœ¬åœ°ä¿®æ”¹
git checkout -- .
git clean -fd
```

### ç¬¬äº”æ­¥ï¼šåˆå¹¶ä¸Šæ¸¸æ›´æ–°

```bash
# åˆå¹¶upstream/mainåˆ°å½“å‰åˆ†æ”¯
git merge upstream/main
```

**é¢„æœŸè¾“å‡ºï¼š**
```
Merge made by the 'ort' strategy.
 [ç»Ÿè®¡ä¿¡æ¯] files changed, [ç»Ÿè®¡ä¿¡æ¯] insertions(+), [ç»Ÿè®¡ä¿¡æ¯] deletions(-)
```

### ç¬¬å…­æ­¥ï¼šè§£å†³åˆå¹¶å†²çªï¼ˆå¦‚æœå­˜åœ¨ï¼‰

#### æ£€æŸ¥å†²çªçŠ¶æ€
```bash
# æŸ¥çœ‹å†²çªæ–‡ä»¶
git status

# æŸ¥çœ‹å†²çªè¯¦æƒ…
git diff --name-only --diff-filter=U
```

#### è§£å†³å†²çªæ­¥éª¤
1. **æ‰‹åŠ¨ç¼–è¾‘å†²çªæ–‡ä»¶**ï¼šæ‰“å¼€å†²çªæ–‡ä»¶ï¼Œä¿ç•™éœ€è¦çš„ä»£ç 
2. **æ ‡è®°å†²çªå·²è§£å†³**ï¼š
   ```bash
   git add [å†²çªæ–‡ä»¶è·¯å¾„]
   ```
3. **å®Œæˆåˆå¹¶**ï¼š
   ```bash
   git commit -m "è§£å†³åˆå¹¶å†²çªï¼Œå®Œæˆupstreamæ›´æ–°"
   ```

### ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯æ›´æ–°ç»“æœ

```bash
# æŸ¥çœ‹æœ€æ–°çš„æäº¤å†å²
git log --oneline -10

# ç¡®è®¤åˆå¹¶æˆåŠŸ
git status

# æ£€æŸ¥é¡¹ç›®æ˜¯å¦èƒ½æ­£å¸¸å¯åŠ¨ï¼ˆæ¨èï¼‰
npm start
```

## ğŸš¨ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šupstreamä»“åº“ä¸å­˜åœ¨

**é”™è¯¯ä¿¡æ¯ï¼š**
```
fatal: 'upstream' does not appear to be a git repository
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ·»åŠ upstreamä»“åº“
git remote add upstream https://github.com/lioensky/VCPChat.git

# éªŒè¯æ·»åŠ æˆåŠŸ
git remote -v
```

### é—®é¢˜2ï¼šæœ¬åœ°ä¿®æ”¹ä¼šè¢«è¦†ç›–

**é”™è¯¯ä¿¡æ¯ï¼š**
```
error: Your local changes to the following files would be overwritten by merge:
    package-lock.json
Please commit your changes or stash them before you merge.
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æŸ¥çœ‹å…·ä½“ä¿®æ”¹å†…å®¹
git diff [æ–‡ä»¶å]

# æ ¹æ®ä¿®æ”¹é‡è¦æ€§é€‰æ‹©ï¼š
# 1. æš‚å­˜ä¿®æ”¹ï¼ˆæ¨èï¼‰
git stash push -m "æè¿°ä¿®æ”¹å†…å®¹"

# 2. æäº¤ä¿®æ”¹
git add [æ–‡ä»¶å]
git commit -m "æœ¬åœ°ä¿®æ”¹æè¿°"
```

### é—®é¢˜3ï¼šåˆå¹¶å†²çª

**é”™è¯¯ä¿¡æ¯ï¼š**
```
CONFLICT (content): Merge conflict in [æ–‡ä»¶è·¯å¾„]
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æŸ¥çœ‹å†²çªæ–‡ä»¶
git status

# æ‰‹åŠ¨ç¼–è¾‘å†²çªæ–‡ä»¶ï¼Œè§£å†³å†²çª
# å†²çªæ ‡è®°ç¤ºä¾‹ï¼š
# <<<<<<< HEAD
# æœ¬åœ°ä»£ç 
# =======
# upstreamä»£ç 
# >>>>>>> upstream/main

# è§£å†³åæ·»åŠ æ–‡ä»¶å¹¶æäº¤
git add [å·²è§£å†³å†²çªçš„æ–‡ä»¶]
git commit -m "è§£å†³åˆå¹¶å†²çª"
```

### é—®é¢˜4ï¼šç½‘ç»œè¿æ¥é—®é¢˜

**é”™è¯¯ä¿¡æ¯ï¼š**
```
fatal: unable to access 'https://github.com/...': Failed to connect to github.com port 443
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping github.com

# å°è¯•ä½¿ç”¨ä»£ç†ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
git config --global http.proxy [ä»£ç†åœ°å€]

# æˆ–è®¾ç½®Gité•œåƒ
git config --global url."https://gitclone.com/github.com/".insteadOf "https://github.com/"
```

## ğŸ“ æ›´æ–°åæ£€æŸ¥æ¸…å•

- [ ] Gitåˆå¹¶æˆåŠŸï¼Œæ— å†²çª
- [ ] é¡¹ç›®èƒ½æ­£å¸¸å¯åŠ¨
- [ ] ä¸»è¦åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ–°å¢åŠŸèƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨
- [ ] å¦‚æœæš‚å­˜äº†ä¿®æ”¹ï¼Œå·²æ­£ç¡®æ¢å¤
- [ ] è®°å½•é‡è¦çš„æ›´æ–°å†…å®¹å’Œå˜æ›´

## ğŸ”„ å›æ»šæ“ä½œï¼ˆå¦‚æœéœ€è¦ï¼‰

å¦‚æœåœ¨æ›´æ–°è¿‡ç¨‹ä¸­é‡åˆ°ä¸¥é‡é—®é¢˜ï¼Œå¯ä»¥å›æ»šï¼š

```bash
# å›æ»šåˆ°åˆå¹¶å‰çš„çŠ¶æ€
git reset --hard HEAD~1

# å¦‚æœå·²ç»æ¨é€äº†åˆå¹¶ï¼Œéœ€è¦å¼ºåˆ¶æ¨é€ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
git push --force-with-lease origin main
```

## ğŸ“Š æ›´æ–°æŠ¥å‘Šæ¨¡æ¿

æ¯æ¬¡æ›´æ–°åï¼Œå»ºè®®ç”Ÿæˆæ›´æ–°æŠ¥å‘Šï¼š

### æ›´æ–°æ¦‚è¦
- **æ›´æ–°æ—¶é—´**ï¼š[æ—¥æœŸæ—¶é—´]
- **æ›´æ–°èŒƒå›´**ï¼šä» [æ—§commit] åˆ° [æ–°commit]
- **æ–‡ä»¶å˜æ›´**ï¼š[æ•°å­—] ä¸ªæ–‡ä»¶
- **æ–°å¢è¡Œæ•°**ï¼š[æ•°å­—] è¡Œ
- **åˆ é™¤è¡Œæ•°**ï¼š[æ•°å­—] è¡Œ

### ä¸»è¦æ›´æ–°å†…å®¹
1. **æ–°å¢åŠŸèƒ½**ï¼š
   -
2. **åŠŸèƒ½æ”¹è¿›**ï¼š
   -
3. **Bugä¿®å¤**ï¼š
   -
4. **å…¶ä»–å˜æ›´**ï¼š
   -

### éœ€è¦æ³¨æ„çš„å˜æ›´
-

### å»ºè®®çš„æµ‹è¯•é¡¹ç›®
-

## âš¡ è‡ªåŠ¨åŒ–è„šæœ¬

å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„æ›´æ–°è„šæœ¬ï¼š

```bash
#!/bin/bash
# update-vcpchat.sh

echo "å¼€å§‹VCPChatæ›´æ–°æµç¨‹..."

# 1. æ£€æŸ¥ç¯å¢ƒ
echo "æ£€æŸ¥Gitç¯å¢ƒ..."
git status
git remote -v | grep upstream || {
    echo "é”™è¯¯ï¼šæœªæ‰¾åˆ°upstreamä»“åº“ï¼Œè¯·å…ˆé…ç½®"
    exit 1
}

# 2. æ‹‰å–æ›´æ–°
echo "æ‹‰å–upstreamæ›´æ–°..."
git fetch upstream || {
    echo "é”™è¯¯ï¼šæ‹‰å–æ›´æ–°å¤±è´¥"
    exit 1
}

# 3. æ£€æŸ¥æ˜¯å¦æœ‰æœ¬åœ°ä¿®æ”¹
if [ -n "$(git status --porcelain)" ]; then
    echo "æ£€æµ‹åˆ°æœ¬åœ°ä¿®æ”¹ï¼Œæ­£åœ¨æš‚å­˜..."
    git stash push -m "è‡ªåŠ¨æ›´æ–°å‰æš‚å­˜"
fi

# 4. åˆå¹¶æ›´æ–°
echo "åˆå¹¶upstreamæ›´æ–°..."
git merge upstream/main || {
    echo "è­¦å‘Šï¼šåˆå¹¶è¿‡ç¨‹ä¸­å¯èƒ½å­˜åœ¨å†²çªï¼Œè¯·æ‰‹åŠ¨è§£å†³"
    exit 1
}

# 5. æ¢å¤æš‚å­˜çš„ä¿®æ”¹
if git stash list | grep -q "è‡ªåŠ¨æ›´æ–°å‰æš‚å­˜"; then
    echo "æ¢å¤æœ¬åœ°ä¿®æ”¹..."
    git stash pop
fi

echo "æ›´æ–°å®Œæˆï¼"
```

## ğŸ“ è”ç³»æ”¯æŒ

å¦‚æœåœ¨æ›´æ–°è¿‡ç¨‹ä¸­é‡åˆ°æ— æ³•è§£å†³çš„é—®é¢˜ï¼Œè¯·ï¼š

1. **è®°å½•é”™è¯¯ä¿¡æ¯**ï¼šå®Œæ•´çš„é”™è¯¯è¾“å‡º
2. **è®°å½•æ“ä½œæ­¥éª¤**ï¼šè¯¦ç»†çš„æ“ä½œè¿‡ç¨‹
3. **æä¾›ç¯å¢ƒä¿¡æ¯**ï¼šæ“ä½œç³»ç»Ÿã€Gitç‰ˆæœ¬ã€Node.jsç‰ˆæœ¬ç­‰
4. **è”ç³»é¡¹ç›®ç»´æŠ¤è€…**ï¼šé€šè¿‡GitHub Issuesæˆ–å…¶ä»–å®˜æ–¹æ¸ é“

---

**æ³¨æ„**ï¼šæœ¬æµç¨‹é’ˆå¯¹VCPChaté¡¹ç›®è®¾è®¡ï¼Œä½†å¤§éƒ¨åˆ†æ­¥éª¤ä¹Ÿé€‚ç”¨äºå…¶ä»–ç±»ä¼¼çš„Gité¡¹ç›®æ›´æ–°ã€‚